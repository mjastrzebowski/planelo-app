{"version":3,"sources":["../../src/pages/common/import/import.module.ts","../../src/pages/common/import/import.ts"],"names":["c","r","Object","defineProperty","target","key","CommonImportModule","__decorate","__webpack_require__","i","__WEBPACK_IMPORTED_MODULE_0__angular_core__","declarations","__WEBPACK_IMPORTED_MODULE_2__import__","imports","__WEBPACK_IMPORTED_MODULE_3_app_components_components_module__","__WEBPACK_IMPORTED_MODULE_1_ionic_angular__","forChild","exports","ImportPage","alertCtrl","auth","clientStore","notificationStore","placeStore","trainerStore","profileSessionStore","this","models","model","submitted","import","prototype","resolveItemByKey","item","service","JSON","stringify","getItemByKey","getAdminId","importNotificationItem","admin","owner","type","client","workout","create","save","form","_this","data","__WEBPACK_IMPORTED_MODULE_2_app_providers_utils__","objectToArray","parse","value","db","console","log","forEach","postChangePassword","title","message","buttons","present","errorChangePassword","name","segment","template","__metadata","__WEBPACK_IMPORTED_MODULE_3_app_services_auth_auth_service__","__WEBPACK_IMPORTED_MODULE_4_app_services_client_client_store__","__WEBPACK_IMPORTED_MODULE_5_app_services_notification_notification_store__","__WEBPACK_IMPORTED_MODULE_6_app_services_place_place_store__","__WEBPACK_IMPORTED_MODULE_7_app_services_trainer_trainer_store__","__WEBPACK_IMPORTED_MODULE_8_app_services_profile_session_profile_session_store__"],"mappings":"4eAAyC,OAAAA,GAAA,GAAAC,GAAAC,OAAAC,eAAAC,EAAAC,EAAAJ,GAAAA,GAGHK,EAAA,WAE8B,QAAAA,MAcpE,MAAAA,KAAiCA,GAACC,GAAAC,EAAAC,EAAAC,EAAA,IAArBC,cAZZC,EAAA,GAEGC,SACDC,EAAA,EACQC,EAAA,EAAAC,SAAAJ,EAAA,IAEPK,SACDL,EAAA,MAGAN,unBCjBuCY,EAAA,WACiB,QAAAA,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAIfC,KAAAP,UAAAA,EAEiBO,KAAAN,KAAAA,EAEEM,KAAAL,YAAAA,EACkBK,KAAAJ,kBAAAA,EACrBI,KAAAH,WAAAA,EACMG,KAAAF,aAAAA,EACuBE,KAAAD,oBAAAA,EASlEC,KAAAC,QAAA,gBAMrBD,KAAAE,MACUF,KAA0BC,OAE1B,GAFAD,KAAAG,WAAA,EACAH,KAAAI,UA2ET,MAzESZ,GAAAa,UAAAC,iBAAoC,SAAAC,EAAAC,GACpC,MAAU,gBAAVD,GACYE,KAAZC,UAA0BH,GAT1BC,EAAAG,aAAgBJ,IAYpBf,EAAUa,UAASO,WAAA,SAAAjC,GAClB,OAAWA,GACjB,IAAA,uBAEO,IAAA,uBACS,MAAK,IAEnB,KAAA,uBACc,MAAA,GAGT,SACQ,MAAA,KAIZa,EAACa,UAAAQ,uBAAA,SAAAN,GAEC,OADFA,EAAKO,MAAAd,KAAAY,WAAyBL,EAAAQ,OACrBR,EAAGS,MACX,IAAA,cACS,KACR,KAAS,gBACV,KACF,KAAA,eACF,KAEO,KAAA,iBACO,KAED,KAAK,mBAIfT,EAAKU,OAAAjB,KAAeM,iBAAAC,EAAAU,OAAAjB,KAAAL,aAClBY,EAAKW,QAAClB,KAAAM,iBAAAC,EAAAW,QAAAlB,KAAAD,qBACRC,KAAKJ,kBAAcuB,OAAAZ,IAEnBf,EAAKa,UAAgBe,KAAA,SAAAC,GACnB,GAAAC,GAAMtB,IACRA,MAAKG,WAAA,CACH,IAAAoB,GAAMC,EAAA,EAAAC,cAAAhB,KAAAiB,MAAAL,EAAAM,MAAAC,IAEL,QADJC,QAAAC,IAAA9B,KAAAE,OACaF,KAAKE,OACP,IAAGF,MAAKJ,kBAAiBM,MAChCqB,EAAAQ,QAAwB,SAAOxB,GACrCe,EAAAT,uBAAAN,OAKCf,EAAYa,UAAY2B,mBAAA,WAEJhC,KAACP,UAAA0B,QACdc,MAAK,YACJC,QAAS,iCACXC,SAAK,QAEDC,WAEX5C,EAAAa,UAAAgC,oBAAA,WAEOrC,KAAAP,UAAkB0B,QACZc,MAAK,OACRC,QAAA,mCACAC,SAAE,QAERC,WAEJ5C,IAGCA,GAAYX,GACVC,EAAaC,EAAAM,EAAA,IACbiD,KAAS,SACTC,QAAU,WAEZzD,EAAgBC,EAAAC,EAAA,IAAAwD,SAAA,wkCAEpBC,EAAC,qBAAApD,EAAA,EAAAqD,EAAA,EA7FsBC,EAAA,EAPtBC,EAAU,EACHC,EAAQ,EACPC,EAAU,EACjBC,EAAA,KACDvD","file":"/Users/mjastrzebowski/GitHub/egobody-david-2.0/public_html/build/10.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { ImportPage } from './import';\n\nimport { ComponentsModule } from 'app/components/components.module';\n\n@NgModule({\n  declarations: [\n    ImportPage\n  ],\n  imports: [\n    ComponentsModule,\n    IonicPageModule.forChild(ImportPage)\n  ],\n  exports: [\n    ImportPage\n  ]\n})\nexport class CommonImportModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/common/import/import.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, AlertController } from 'ionic-angular';\n\nimport { List } from 'immutable';\n\nimport { Utils } from 'app/providers/utils';\n\nimport { AuthService } from 'app/services/auth/auth-service';\n\nimport { ClientStore } from 'app/services/client/client-store';\nimport { NotificationStore } from 'app/services/notification/notification-store';\nimport { PlaceStore } from 'app/services/place/place-store';\nimport { TrainerStore } from 'app/services/trainer/trainer-store';\nimport { ProfileSessionStore } from 'app/services/profile-session/profile-session-store';\n\n@IonicPage({\n  name: 'import',\n  segment: 'import'\n})\n@Component({\n  templateUrl: 'import.html'\n})\nexport class ImportPage {\n  import: any;\n  submitted: boolean;\n  models = ['Notification'];\n  model = this.models[0];\n\n  constructor(\n    private alertCtrl: AlertController,\n    private auth: AuthService,\n    private clientStore: ClientStore,\n    private notificationStore: NotificationStore,\n    private placeStore: PlaceStore,\n    private trainerStore: TrainerStore,\n    private profileSessionStore: ProfileSessionStore\n  ) {\n    this.submitted = false;\n    this.import = {};\n  }\n\n  private resolveItemByKey(item, service) {\n    if (typeof item === 'object') {\n      return JSON.stringify(item);\n    }\n    return service.getItemByKey(item);\n  }\n\n  private getAdminId(key) {\n    switch (key) {\n      case '-KBN-b7GjsB6FS8Opmx0':\n      case '-KNSsNzm8WH_t_lwASAz': {\n        return 106;\n      }\n      case '-KBN-fYLnmIQ_6pSwnV6': {\n        return 11;\n      }\n      default: {\n        return 2;\n      }\n    }\n  }\n\n  private importNotificationItem(item) {\n    item.admin = this.getAdminId(item.owner);\n\n    switch (item.type) {\n      case 'clientAdded':\n\n        break;\n      case 'clientRemoved':\n        break;\n      case 'workoutAdded':\n        break;\n      case 'workoutRemoved':\n        break;\n      case 'workoutRejected':\n        break;\n    }\n    item.client = this.resolveItemByKey(item.client, this.clientStore);\n    item.workout = this.resolveItemByKey(item.workout, this.profileSessionStore);\n    this.notificationStore.create(item);\n  }\n\n  save(form): void {\n    this.submitted = true;\n    let data = Utils.objectToArray(JSON.parse(form.value.db));\n    console.log(this.model);\n\n    switch (this.model) {\n      case this.notificationStore.model:\n        data.forEach(item => {\n          this.importNotificationItem(item);\n        });\n        break;\n    }\n  }\n\n  private postChangePassword(): void {\n    let alert = this.alertCtrl.create({\n      title: 'Zmieniono',\n      message: 'Twoje hasło zostało zmienione.',\n      buttons: ['Ok']\n    });\n    alert.present();\n  }\n\n  private errorChangePassword(): void {\n    let alert = this.alertCtrl.create({\n      title: 'Błąd',\n      message: 'Obecne hasło jest nieprawidłowe.',\n      buttons: ['Ok']\n    });\n    alert.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/common/import/import.ts"]}